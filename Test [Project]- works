def read_string_list_from_file(the_file):    
    fileRef = open("list_of_formulas.txt","r") # opening file to be read
    localList=[]
    for line in fileRef:
        string = line[0:len(line)-1]  # eliminates trailing '\n'
                                      # of each line 
                                    
        localList.append(string)  # adds string to list
        
    fileRef.close()  
 
    return localList

#For the number of guesses. 

def max_number_guess(max_guess):
    while max_guess.isdigit()== False or max_guess < 1:
        print "Please type a number:"
        max_guess = input("Maximum wrong-guesses you want to have allowed?")
    
    return int(max_guess)


def guess_validator():
    print "You can use digits 0 to 9 and symbols + *"
    symbol = raw_input("Please enter an operation symbol or digit:")
    while len(symbol) > 1 or symbol not in ["+", "*", "0", "1","2", "3", "4", "5", "6", "7", "8", "9"]:
        print "That is not a symbol, digit or too many characters."
        symbol = raw_input("Please enter an operation symbol or digit:")
        print

    return symbol


global partial_fmla
answer= ""

def guess_update(random_fmla, partial_fmla, symbol):
    answer = '';
    #if symbol not in random_fmla or symbol in partial_fmla: #symbol is the guess |  partial_fmla is ----------
    if symbol in random_fmla:
        for i in range(len(random_fmla)):
            if symbol == random_fmla[i]:
                answer += random_fmla[i]
            else:
                answer += partial_fmla[i]
    else:
        answer = partial_fmla

    print answer
    print
    return answer


#######################################################################################
        
listStrings= read_string_list_from_file("list_of_formulas.txt")

import random

random_fmla = (random.choice(listStrings)) #chooses a formula randomly

print "random formula:%s\n\n" % random_fmla


attempts = 0

partial_fmla = len(random_fmla)*"-"

print "The formula you will have to guess has", len(random_fmla) ,"symbols: ", partial_fmla

print

max_guess = raw_input("Maximum wrong-guesses you want to have allowed?")

print

max_guess = max_number_guess(max_guess)

print

while attempts < max_guess and partial_fmla != random_fmla:
    symbol= guess_validator()
    partial_fmla = guess_update(random_fmla, partial_fmla, symbol)
    attempts += 1
    print 'Number of allowable attempts left:', max_guess-attempts
    print 'Number of attempts made:', attempts
    print


